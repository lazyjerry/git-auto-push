# Git Auto Push è‡ªå‹•æ¨é€å·¥å…·

åŸºæ–¼å¤š AI å·¥å…·çš„ Git å·¥ä½œæµç¨‹è‡ªå‹•åŒ–ï¼Œæ”¯æ´å››ç¨®æ“ä½œæ¨¡å¼å’Œæ™ºèƒ½ commit message ç”Ÿæˆã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹è‰²

- **å¤šæ¨¡å¼è¨­è¨ˆ**: å®Œæ•´æµç¨‹ | æœ¬åœ°æäº¤ | åƒ…æ·»åŠ  | å…¨è‡ªå‹•æ¨¡å¼
- **AI å·¥å…·éˆ**: codex â†’ gemini â†’ claude æ™ºèƒ½ fallback
- **å½©è‰²å‹•ç•«**: Loading æ•ˆæœèˆ‡è¦–è¦ºåé¥‹ç³»çµ±
- **ä¿¡è™Ÿè™•ç†**: å¤šå±¤ç´š trap æ©Ÿåˆ¶ç¢ºä¿ç©©å®šæ€§

## ğŸ’¡ éˆæ„Ÿä¾†æº

æ­¤å·¥å…·æºè‡ª [@ihower](https://www.threads.com/@ihower) çš„ [Claude Code è‡ªå‹•åŒ–æµç¨‹](https://www.threads.com/@ihower/post/DNnLBb6xDKF)ï¼Œæ“´å±•ç‚ºæ”¯æ´å¤šç¨® AI CLI å·¥å…·çš„é–‹æºæ›¿ä»£æ–¹æ¡ˆã€‚

## ğŸ“¸ Screenshots

### ä¸»è¦ä»‹é¢æ“ä½œæµç¨‹

![æ“ä½œé¸å–®ç•Œé¢](./screenshots/main-menu.png)
_ä¸»è¦æ“ä½œé¸å–®ï¼Œæä¾›å››ç¨®ä¸åŒçš„ Git å·¥ä½œæµç¨‹æ¨¡å¼_

### AI æ™ºèƒ½ç”Ÿæˆ Commit Message

![AI ç”Ÿæˆ Commit Message](./screenshots/ai-commit-generation.png)
_AI å·¥å…·è‡ªå‹•åˆ†æç¨‹å¼ç¢¼è®Šæ›´ä¸¦ç”Ÿæˆåˆé©çš„ commit message_

### å…¨è‡ªå‹•æ¨¡å¼

![å…¨è‡ªå‹•æ¨¡å¼](./screenshots/auto-mode.png)
_ä¸€éµåŸ·è¡Œçš„å…¨è‡ªå‹•æ¨¡å¼ï¼Œå®Œå…¨ç„¡éœ€äººå·¥ä»‹å…¥_

> ğŸ“– **ä½¿ç”¨æŒ‡å—**ï¼šå®Œæ•´çš„å…¨è‡ªå‹•æ¨¡å¼è¨­å®šå’Œä½¿ç”¨èªªæ˜ï¼Œè«‹åƒé–± [AUTO_MODE_GUIDE.md](./AUTO_MODE_GUIDE.md)

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ” **è‡ªå‹•æª¢æ¸¬** Git å€‰åº«å’Œè®Šæ›´ç‹€æ…‹
- ğŸ“ **AI æ™ºèƒ½ç”Ÿæˆ** commit messageï¼ˆæ”¯æ´å¤šç¨® AI å·¥å…·ï¼‰
- ğŸ¯ **éˆæ´»é¸å–®** å››ç¨®æ“ä½œæ¨¡å¼ï¼šå®Œæ•´æµç¨‹ã€æœ¬åœ°æäº¤ã€åƒ…æ·»åŠ æª”æ¡ˆã€å…¨è‡ªå‹•æ¨¡å¼
- ğŸ¬ **Loading å‹•ç•«** AI å·¥å…·èª¿ç”¨æ™‚çš„ç²¾ç¾å‹•ç•«æ•ˆæœ
- ğŸŒˆ **å½©è‰²è¼¸å‡º** æä¾›æ¸…æ™°çš„è¦–è¦ºåé¥‹å’Œç²—é«”çªå‡ºé¡¯ç¤º
- ğŸ›¡ï¸ **å®‰å…¨ç¢ºèª** æ¯æ­¥æ“ä½œéƒ½æœ‰ç¢ºèªæ©Ÿåˆ¶å’Œè¼¸å…¥ç·©è¡å€æ¸…ç†
- ğŸš€ **å‘½ä»¤åˆ—æ”¯æ´** æ”¯æ´å…¨è‡ªå‹•æ¨¡å¼çš„å‘½ä»¤åˆ—åƒæ•¸

## ğŸ¯ æ“ä½œæ¨¡å¼

å·¥å…·æä¾›å››ç¨®éˆæ´»çš„æ“ä½œæ¨¡å¼ï¼š

### 1. ğŸš€ å®Œæ•´æµç¨‹ (é è¨­)

- **æµç¨‹**ï¼šadd â†’ commit â†’ push
- **é©ç”¨**ï¼šæ—¥å¸¸é–‹ç™¼æäº¤ï¼Œå®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶æµç¨‹
- **ç‰¹è‰²**ï¼šåŒ…å« AI ç”Ÿæˆ commit messageã€ç”¨æˆ¶ç¢ºèªç­‰å®Œæ•´åŠŸèƒ½

### 2. ğŸ“ æœ¬åœ°æäº¤

- **æµç¨‹**ï¼šadd â†’ commit
- **é©ç”¨**ï¼šé›¢ç·šé–‹ç™¼ã€æœ¬åœ°æ¸¬è©¦æˆ–æš«ä¸æ¨é€çš„æƒ…æ³
- **ç‰¹è‰²**ï¼šå®Œæˆæœ¬åœ°ç‰ˆæœ¬è¨˜éŒ„ï¼Œç¨å¾Œå¯æ‰‹å‹•æ¨é€

### 3. ğŸ“¦ åƒ…æ·»åŠ æª”æ¡ˆ

- **æµç¨‹**ï¼šadd
- **é©ç”¨**ï¼šåˆ†éšæ®µæäº¤ã€æª¢æŸ¥è®Šæ›´æˆ–æš«å­˜æª”æ¡ˆ
- **ç‰¹è‰²**ï¼šå°‡è®Šæ›´æ·»åŠ åˆ°æš«å­˜å€ï¼Œä¿ç•™æäº¤æ§åˆ¶æ¬Š

### 4. ğŸ¤– å…¨è‡ªå‹•æ¨¡å¼ (æ–°)

- **æµç¨‹**ï¼šadd â†’ AI commit â†’ push
- **é©ç”¨**ï¼šå¿«é€Ÿæäº¤ã€è‡ªå‹•åŒ–è…³æœ¬ã€CI/CD æ•´åˆ
- **ç‰¹è‰²**ï¼šå®Œå…¨ç„¡éœ€ç”¨æˆ¶ä»‹å…¥ï¼ŒAI è‡ªå‹•ç”Ÿæˆ commit message ä¸¦æ¨é€
- **å‘½ä»¤åˆ—**ï¼šæ”¯æ´ `--auto` å’Œ `-a` åƒæ•¸ç›´æ¥å•Ÿç”¨

> ğŸ“– **è©³ç´°èªªæ˜**ï¼šé—œæ–¼å…¨è‡ªå‹•æ¨¡å¼çš„å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼Œè«‹åƒé–± [AUTO_MODE_GUIDE.md](AUTO_MODE_GUIDE.md)

## ğŸ¯ å·¥ä½œæµç¨‹

1. **æª¢æŸ¥ Git å€‰åº«**ï¼šé©—è­‰ç•¶å‰ç›®éŒ„æ˜¯å¦ç‚ºæœ‰æ•ˆçš„ Git å€‰åº«
2. **æª¢æ¸¬è®Šæ›´**ï¼šè‡ªå‹•æƒæä¸¦é¡¯ç¤ºæ‰€æœ‰è®Šæ›´çš„æª”æ¡ˆ
3. **ç„¡è®Šæ›´è™•ç†**ï¼šå¦‚æ²’æœ‰æ–°è®Šæ›´ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰æœªæ¨é€çš„æäº¤ä¸¦æä¾›æ¨é€é¸é …
4. **æ·»åŠ æª”æ¡ˆ**ï¼šå°‡æ‰€æœ‰è®Šæ›´æ·»åŠ åˆ° Git æš«å­˜å€
5. **é¸æ“‡æ¨¡å¼**ï¼šç”¨æˆ¶é¸æ“‡è¦åŸ·è¡Œçš„æ“ä½œç¯„åœï¼ˆæˆ–è‡ªå‹•æ¨¡å¼è·³éæ­¤æ­¥ï¼‰
6. **ç”Ÿæˆè¨Šæ¯**ï¼šæ™ºèƒ½ AI ç”Ÿæˆæˆ–æ‰‹å‹•è¼¸å…¥ commit messageï¼ˆéœ€è¦æ™‚ï¼‰
7. **ç¢ºèªæäº¤**ï¼šé¡¯ç¤ºæäº¤è³‡è¨Šä¾›ç”¨æˆ¶ç¢ºèªï¼ˆéœ€è¦æ™‚ï¼‰
8. **åŸ·è¡Œæ“ä½œ**ï¼šæ ¹æ“šé¸æ“‡åŸ·è¡Œå°æ‡‰çš„ Git æ“ä½œ

## ï¿½ å®‰è£ä½¿ç”¨

```bash
# ä¸‹è¼‰ä¸¦è¨­ç½®åŸ·è¡Œæ¬Šé™
curl -O https://raw.githubusercontent.com/lazyjerry/git-auto-push/master/git-auto-push.sh
chmod +x git-auto-push.sh

# åŸºæœ¬ä½¿ç”¨ - äº’å‹•æ¨¡å¼
./git-auto-push.sh

# å…¨è‡ªå‹•æ¨¡å¼ - é›¶äº’å‹•
./git-auto-push.sh --auto

# å…¨åŸŸå®‰è£ (æ¨è–¦)
sudo cp git-auto-push.sh /usr/local/bin/git-auto-push
```

## âš™ï¸ å››ç¨®æ“ä½œæ¨¡å¼

| æ¨¡å¼         | æµç¨‹                   | å ´æ™¯       | åƒæ•¸     |
| ------------ | ---------------------- | ---------- | -------- |
| **å®Œæ•´æµç¨‹** | add â†’ commit â†’ push    | æ—¥å¸¸é–‹ç™¼   | é è¨­     |
| **æœ¬åœ°æäº¤** | add â†’ commit           | é›¢ç·šé–‹ç™¼   | é¸é … 2   |
| **åƒ…æ·»åŠ **   | add                    | æš«å­˜æª”æ¡ˆ   | é¸é … 3   |
| **å…¨è‡ªå‹•**   | add â†’ AI commit â†’ push | CI/CD æ•´åˆ | `--auto` |

## ğŸ¤– AI å·¥å…·éˆæ¶æ§‹

**å„ªå…ˆç´šé †åº** (hardcoded in `generate_auto_commit_message*()` functions):

```bash
codex â†’ gemini â†’ claude â†’ fallback("è‡ªå‹•æäº¤ï¼šæ›´æ–°å°ˆæ¡ˆæª”æ¡ˆ")
```

**èª¿ç”¨æ¨¡å¼**:

- `codex exec '$prompt'` - ç›´æ¥åŸ·è¡Œ
- `echo '$prompt' | gemini` - stdin ç®¡é“
- `echo '$prompt' | claude` - stdin ç®¡é“

**é—œéµç‰¹æ€§**:

- 45 ç§’çµ±ä¸€è¶…æ™‚æ©Ÿåˆ¶
- `clean_ai_message()` è‡ªå‹•æ¸…ç†è¼¸å‡ºæ ¼å¼
- èƒŒæ™¯ Loading å‹•ç•« (`show_loading()` é€²ç¨‹)

## âš™ï¸ é…ç½®è¦é»

**é—œéµé…ç½®ä½ç½®**:

- `DEFAULT_OPTION=1` (line 674) - é è¨­æ“ä½œæ¨¡å¼
- AI å·¥å…·å„ªå…ˆç´šåœ¨ **å…©è™•å¿…é ˆåŒæ­¥**:
  - `generate_auto_commit_message()` (line ~453)
  - `generate_auto_commit_message_silent()` (line ~385)

```bash
# ä¿®æ”¹ç¯„ä¾‹ï¼šè®“ Gemini å„ªå…ˆ
local ai_tools=(
    "gemini"    # ç¬¬ä¸€å„ªå…ˆ
    "codex"     # ç¬¬äºŒå„ªå…ˆ
    "claude"    # ç¬¬ä¸‰å„ªå…ˆ
)
```

## ğŸ¬ ä½¿ç”¨ç¯„ä¾‹

### äº’å‹•æ¨¡å¼å…¸å‹æµç¨‹

```bash
$ ./git-auto-push.sh
æª¢æ¸¬åˆ°ä»¥ä¸‹è®Šæ›´: M src/main.js
è«‹é¸æ“‡è¦åŸ·è¡Œçš„ Git æ“ä½œ: [1-4] (é è¨­ 1):
è«‹è¼¸å…¥ commit message (Enter ä½¿ç”¨ AI):
â ‹ æ­£åœ¨ç­‰å¾… codex å›æ‡‰...
âœ… AI ç”Ÿæˆ: ğŸ”– å„ªåŒ–ä¸»ç¨‹å¼é‚è¼¯
æ˜¯å¦ä½¿ç”¨æ­¤è¨Šæ¯ï¼Ÿ(y/n):
æ­£åœ¨æäº¤è®Šæ›´... âœ… æˆåŠŸæ¨é€åˆ° main
```

### å…¨è‡ªå‹•æ¨¡å¼ - é›¶äº’å‹•

```bash
$ ./git-auto-push.sh --auto
ğŸ¤– å…¨è‡ªå‹•æ¨¡å¼å•Ÿå‹•
æª¢æ¸¬è®Šæ›´ â†’ AI ç”Ÿæˆ â†’ è‡ªå‹•æäº¤æ¨é€
âœ… å®Œæ•´æµç¨‹åŸ·è¡Œå®Œæˆ
```

### ç„¡è®Šæ›´æ™‚çš„æ™ºèƒ½è™•ç†

```bash
$ ./git-auto-push.sh
æ²’æœ‰éœ€è¦æäº¤çš„è®Šæ›´ã€‚
æª¢æ¸¬åˆ° 2 å€‹æœªæ¨é€çš„æœ¬åœ°æäº¤ã€‚
æ˜¯å¦æ¨é€ï¼Ÿ(Enter=æ˜¯):
æˆåŠŸæ¨é€åˆ° main ğŸ‰
```

==================================================
ğŸ‰ å…¨è‡ªå‹•å·¥ä½œæµç¨‹åŸ·è¡Œå®Œæˆï¼
ğŸ“Š åŸ·è¡Œæ‘˜è¦ï¼š
âœ… æª”æ¡ˆå·²æ·»åŠ åˆ°æš«å­˜å€
âœ… ä½¿ç”¨ AI ç”Ÿæˆ commit message
âœ… è®Šæ›´å·²æäº¤åˆ°æœ¬åœ°å€‰åº«
âœ… è®Šæ›´å·²æ¨é€åˆ°é ç«¯å€‰åº«
==================================================

````

### ç¯„ä¾‹ 5ï¼šç„¡è®Šæ›´ä½†æœ‰æœªæ¨é€æäº¤

```bash
$ ./git-auto-push.sh
Git è‡ªå‹•æ·»åŠ æ¨é€åˆ°é ç«¯å€‰åº«å·¥å…·
==================================================
æ²’æœ‰éœ€è¦æäº¤çš„è®Šæ›´ã€‚

æª¢æ¸¬åˆ° 2 å€‹æœªæ¨é€çš„æœ¬åœ°æäº¤ã€‚

æ˜¯å¦è¦å°‡æœ¬åœ°æäº¤æ¨é€åˆ°é ç«¯å€‰åº«ï¼Ÿ(y/nï¼Œç›´æ¥æŒ‰ Enter è¡¨ç¤ºåŒæ„):

æ­£åœ¨æ¨é€åˆ°é ç«¯å€‰åº«...
æˆåŠŸæ¨é€åˆ° main ğŸ‰
````

## ğŸ›  æ•…éšœæ’é™¤

````

## ï¿½ æ•…éšœæ’é™¤

### AI å·¥å…·å•é¡Œ
```bash
# æª¢æŸ¥å·¥å…·ç‹€æ…‹
./check-ai-tools.sh && ./test-ai-tools.sh

# ç™»å…¥èªè­‰
claude login    # Claude CLI
gh auth login   # GitHub Copilot
````

### è¼¸å…¥è™•ç†å•é¡Œ

- **v1.1+** å·²ä¿®æ­£è¼¸å…¥ç·©è¡å€æ¸…ç† (æ¯æ¬¡ç¢ºèªå‰åŸ·è¡Œ `read -r -t 0.1 dummy`)
- ä½¿ç”¨ **ç©ºç™½è¼¸å…¥ = åŒæ„** çš„é è¨­è¡Œç‚º
- é‡è©¦æ©Ÿåˆ¶: è¼¸å…¥ `'ai'` é‡æ–°ç”Ÿæˆ, `'q'` é€€å‡º

### ä¿¡è™Ÿè™•ç†æ¶æ§‹

```bash
# ä¸‰å±¤ trap æ©Ÿåˆ¶ç¢ºä¿ç©©å®šæ€§
trap global_cleanup INT TERM      # ä¸»ç¨‹åºå±¤ç´š
trap loading_cleanup INT TERM     # Loading å‹•ç•«å±¤ç´š
trap cleanup_and_exit INT TERM    # å‘½ä»¤åŸ·è¡Œå±¤ç´š
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
git-auto-push.sh       # ä¸»è…³æœ¬ (966 è¡Œ)
â”œâ”€â”€ AI å·¥å…·æ•´åˆ         # run_*_command() å‡½æ•¸ç¾¤
â”œâ”€â”€ Loading ç³»çµ±        # show_loading() + run_command_with_loading()
â”œâ”€â”€ æ¨¡å¼é¸æ“‡           # show_operation_menu() + execute_*_workflow()
â””â”€â”€ ä¿¡è™Ÿè™•ç†           # å¤šå±¤ç´š trap æ©Ÿåˆ¶

extra_type/           # æ›¿ä»£å¯¦ç¾ (Python é–‹ç™¼ä¸­)
AUTO_MODE_GUIDE.md    # å…¨è‡ªå‹•æ¨¡å¼å°ˆç”¨æ–‡æª”
screenshots/          # UI å±•ç¤ºåœ–ç‰‡
```

## ï¿½ ç‰ˆæœ¬æ­·ç¨‹

- **v1.3** - å…¨è‡ªå‹•æ¨¡å¼ (`--auto`), æœªæ¨é€æäº¤æª¢æ¸¬
- **v1.2** - å››ç¨®æ“ä½œæ¨¡å¼é¸å–®, Loading å‹•ç•«ç³»çµ±
- **v1.1** - ä¿®æ­£è¼¸å…¥ç·©è¡å€æ¸…ç†å•é¡Œ
- **v1.0** - åŸºç¤ç‰ˆæœ¬ç™¼å¸ƒ

## ğŸ¤ åƒèˆ‡è²¢ç»

```bash
# æ¨™æº– Git å·¥ä½œæµç¨‹
git checkout -b feature/amazing-feature
git commit -m 'Add amazing feature'
git push origin feature/amazing-feature
# ç„¶å¾Œé–‹å•Ÿ Pull Request
```

---

ä½œè€…: **A Bit of Vibe Jerry** ([@lazyjerry](https://github.com/lazyjerry))  
æˆæ¬Š: **MIT License** - æŸ¥çœ‹ [LICENSE](LICENSE)

â­ï¸ å¦‚æœé€™å€‹å·¥å…·å°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹ Star æ”¯æŒï¼
